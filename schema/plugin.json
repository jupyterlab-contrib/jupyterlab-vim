{
  "title": "Notebook Vim",
  "description": "Notebook Vim Settings",
  "type": "object",
  "additionalProperties": false,
  "jupyter.lab.shortcuts": [
    {
      "command": "notebook:enter-command-mode",
      "keys": ["Escape"],
      "selector": ".jp-Notebook.jp-mod-editMode",
      "disabled": true
    },
    {
      "command": "vim:enter-normal-mode",
      "keys": ["Escape"],
      "selector": ".jp-FileEditor"
    },
    {
      "command": "documentsearch:end",
      "keys": ["Escape"],
      "selector": ".jp-mod-searchable .jp-FileEditor [data-jp-vim-mode-name='normal']"
    },
    {
      "command": "documentsearch:end",
      "keys": ["Escape"],
      "selector": ".jp-mod-search-active .jp-FileEditor [data-jp-vim-mode-name='normal']"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "U"],
      "command": "notebook:undo-cell-action"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "-"],
      "command": "notebook:split-cell-at-cursor"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "D"],
      "command": "vim:cut-cell-and-edit"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "Y"],
      "command": "vim:copy-cell-and-edit"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "P"],
      "command": "vim:paste-cell-and-edit"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl Shift J"],
      "command": "notebook:extend-marked-cells-below"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Ctrl Shift J"],
      "command": "notebook:extend-marked-cells-below"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl Shift K"],
      "command": "notebook:extend-marked-cells-above"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Ctrl Shift K"],
      "command": "notebook:extend-marked-cells-above"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "Shift O"],
      "command": "notebook:insert-cell-above"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "Ctrl O"],
      "command": "notebook:insert-cell-above"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "O"],
      "command": "notebook:insert-cell-below"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl J"],
      "command": "vim:select-below-execute-markdown"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl K"],
      "command": "vim:select-above-execute-markdown"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'][data-jp-vim-esc-to-cmd-mode='false'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Escape"],
      "command": "vim:leave-insert-mode"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'][data-jp-vim-esc-to-cmd-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Escape"],
      "command": "vim:leave-current-mode"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'][data-jp-vim-esc-to-cmd-mode='false'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl ["],
      "command": "vim:leave-insert-mode"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'][data-jp-vim-esc-to-cmd-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl ["],
      "command": "vim:leave-current-mode"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Ctrl I"],
      "command": "vim:enter-insert-mode"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl Enter"],
      "command": "vim:run-cell-and-edit"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Shift Enter"],
      "command": "vim:run-select-next-edit"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Shift Escape"],
      "command": "notebook:enter-command-mode"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'][data-jp-vim-shift-esc-override-browser='true'] .jp-Notebook.jp-mod-commandMode",
      "keys": ["Shift Escape"],
      "command": "vim:no-action"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Shift M"],
      "command": "vim:merge-and-edit"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Accel 1"],
      "command": "notebook:change-cell-to-code"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Accel 2"],
      "command": "notebook:change-cell-to-markdown"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Accel 3"],
      "command": "notebook:change-cell-to-raw"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "G"],
      "command": "vim:select-first-cell"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "Ctrl G"],
      "command": "vim:select-last-cell"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["G", "G"],
      "command": "vim:select-first-cell"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Shift G"],
      "command": "vim:select-last-cell"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Y", "Y"],
      "command": "notebook:copy-cell"
    },
    {
      "command": "notebook:cut-cell",
      "keys": ["D", "D"],
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Shift P"],
      "command": "notebook:paste-cell-above"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["P"],
      "command": "notebook:paste-cell-below"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["O"],
      "command": "notebook:insert-cell-below"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Shift O"],
      "command": "notebook:insert-cell-above"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["U"],
      "command": "notebook:undo-cell-action"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Ctrl E"],
      "command": "notebook:move-cell-down"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Ctrl Y"],
      "command": "notebook:move-cell-up"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Z", "Z"],
      "command": "vim:center-cell"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Z", "C"],
      "command": "notebook:hide-cell-code"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Z", "O"],
      "command": "notebook:show-cell-code"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Z", "M"],
      "command": "notebook:hide-all-cell-code"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",
      "keys": ["Z", "R"],
      "command": "notebook:show-all-cell-code"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode",
      "keys": ["Ctrl O", "Z", "Z"],
      "command": "vim:center-cell"
    },
    {
      "selector": ".jp-NotebookPanel[data-jp-vim-mode='true'] .jp-Notebook.jp-mod-editMode .jp-InputArea-editor:not(.jp-mod-has-primary-selection)",
      "keys": ["Ctrl G"],
      "command": "tooltip:launch-notebook"
    }
  ],
  "jupyter.lab.menus": {
    "main": [
      {
        "id": "jp-mainmenu-settings",
        "items": [
          {
            "type": "separator",
            "rank": 38
          },
          {
            "command": "jupyterlab-vim:toggle",
            "rank": 38
          },
          {
            "type": "separator",
            "rank": 38
          }
        ]
      }
    ]
  },
  "properties": {
    "enabled": {
      "type": "boolean",
      "title": "Enabled",
      "description": "Enable/disable vim extension (may require a page refresh)",
      "default": true
    },
    "enabledInEditors": {
      "type": "boolean",
      "title": "Enabled in Text Editor",
      "description": "Enable/disable vim in text editors (may require a page refresh)",
      "default": true
    },
    "cmdModeKeys": {
      "type": "object",
      "title": "Notebook shortcut key bindings for switching from vim Normal mode to Jupyter Command mode",
      "properties": {
        "escToCmdMode": {
          "type": "boolean",
          "title": "Enable `Esc` and `Ctrl-[` leaving vim Normal mode to Jupyter Command mode",
          "default": true
        },
        "shiftEscOverrideBrowser": {
          "type": "boolean",
          "title": "Override `Shift-Esc` browser shortcut in Jupyter Command mode",
          "default": true
        }
      }
    },
    "extraKeybindings": {
      "type": "array",
      "title": "Extra Vim Keybindings",
      "items": {
        "$ref": "#/definitions/shortcut"
      },
      "default": []
    }
  },
  "definitions": {
    "shortcut": {
      "properties": {
        "command": {
          "title": "Keybinding",
          "description": "The new vim keybinding, or 'left hand side' of the keybinding, e.g. `M`",
          "type": "string"
        },
        "keys": {
          "title": "The key sequence to execute",
          "description": "The 'right hand side' of the keybinding to be executed, e.g. `:noh<CR>`. non-character keys are written in camel case. e.g. <Esc> or <PageUp>",
          "type": "string"
        },
        "context": {
          "title": "Mode",
          "description": "Vim mode in which the keybinding applies",
          "enum": ["normal", "insert", "visual"],
          "default": "normal"
        },
        "mapfn": {
          "title": "Map function",
          "description": "Vim map function to use",
          "enum": ["map", "noremap"],
          "default": "map"
        },
        "enabled": {
          "description": "Whether this keybinding is enabled or not.",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["command", "keys"],
      "type": "object"
    }
  }
}
